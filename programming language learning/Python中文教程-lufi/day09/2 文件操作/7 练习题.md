1. 补充代码：实现下载视频 并保存到本地
```python
import requests  
res = requests.get(  
    url="https://youtu.be/Ry1m40ScWks",  
    headers={  
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.67"  
    }  
)  
  
# 视频的文件内容  
with open('youtube.mp4', mode='wb') as file_object:  
    file_object.write(res.content)
```
如何找到自己的headers，可以在浏览器中按 f12，出现界面之后点开network，然后刷新，随便选择一个，在header页面拉到最下面找到user agent即可

2. 日志分析，计算某用户223.73.89.192访问次数，日志文件如下：`access.log`
```python
import  operator  
  
total_count = 0  
word = 'Microsoft-Windows-Kernel-General'  
  
with open('file/access.txt', mode='r', encoding='utf-8') as file_object:  
    for line in file_object:  
        if operator.contains(line, word):  
            total_count += 1  
print(total_count)
```
可以使用event viewer查看日志文件并查看，选择日志文件中的内容进行计数
这里的operator是采用c语言编写的，速度比python更快
使用operator.contains 方法可以快速查找内容

进阶技巧，使用if not减小代码层级
```python
import  operator  
  
total_count = 0  
word = 'Microsoft-Windows-Kernel-General'  
  
with open('file/access.txt', mode='r', encoding='utf-8') as file_object:  
    for line in file_object:  
        if not operator.contains(line, word):  
	        continue
        total_count += 1  
print(total_count)
```

3. 日志分析升级，计算多种数据
```python
user_dict = {  
  
}  
with open('file/access.txt', mode='r', encoding='utf-8') as file_object:  
    for line in file_object:  
        user_content = line.split(' ')[0]  
        if user_content in user_dict:  
            user_dict[user_content] += 1  
        else:  
            user_dict[user_content] = 1  
  
print(user_dict)
```

4. 删选数据，大于某个数字的数据
![[Pasted image 20230710163125.png]]
```python
with open('file/info.txt', mode='r', encoding='utf-8') as file_object:  
    # 1. 跳过第一行  
    file_object.readline()  
    # 2. 接着读  
    for line in file_object:  
        price = line.split(',')[2]  
        price = float(price)  
        if price > 20:  
            print(line.strip())  
            # 去掉制表符
```

5. 要求修改文件内容，源文件内容如下，access.txt
```python
with open('file/access.txt', mode='r', encoding='utf-8') as read_file_object, \  
        open('file/new.txt', mode='w',encoding='utf-8') as write_file_object:  
    for line in read_file_object:  
        new_line = line.replace('Microsoft', 'Ubuntu')  
        write_file_object.write(new_line)
```
将文件中的指定内容修改

思路1
文件读到内存，replace即可（适用于小文件）

思路2
每行寻找内容，找到内容后替换（会覆盖掉数据，但是没法完全替换）
这种不行

思路3
同时打开两个文件，读+写（适用于小文件和大文件）

补充：
5. 修改内容
```python
with open('file/access.txt', mode='r', encoding='utf-8') as read_file_object, \  
        open('file/new.txt', mode='w',encoding='utf-8') as write_file_object:  
    for line in read_file_object:  
        new_line = line.replace('Microsoft', 'Ubuntu')  
        write_file_object.write(new_line)

import shutil  
  
shutil.move('file/access.txt', 'file/new.txt')
```
利用python自带的shutil模块进行重命名
