1. json格式和json模块
2. json模块处理特殊的数据类型
3. datetime格式和字符串,时间戳以及相关之间的转换
4. datetime格式时间和timedelta的加减
5. 两个datetime相减可以计算时间间隔,得到的是一个timedelta格式的时间
6. 了解正则表达式的编写方式和python中re模块的使用
7. 项目开发规范

## 作业:开发短视频资讯平台

- 有video.csv视频库文件,其中有999条短视频数据,格式如下:
![[Pasted image 20231027201626.png]]

- 项目的核心功能有:
	- 分页看新闻(每页显示10条), 提示用户输入页码, 根据页码显示指定页面的数据
		- 提示用户输入页码,根据页码显示指定页面的数据
		- 当用户输入的页码不存在的时候,默认显示第1页
	- 搜索专区
		- 用户输入关键字,根据关键字筛选出所有匹配成功的短视频咨询
		- 支持的搜索两种搜索格式:
			- `id=1715025`,筛选出id等于1715025的视频(video.csv第一列数据)
			- `key=文本`,模糊搜索,筛选包含关键字的所有新闻(video.csv的第二列)
	- 下载专区
		- 用户输入视频id,根据id找到对应的mp4视频下载地址,然后下载视频到项目的files目录
			- 视频的文件名是:`视频id-年-月-日-时-分-秒.mp4`
			- 视频下载代码示例

```python
import requests

res = requests.get(
	url='https://video.pearvideo.com/mp4/adshort/20210105/cont-1715046-15562045_adpkg-ad_hd.mp4'
)

# 视频总大小(字节)
file_size = int(res.headers['Content-Length'])

download_size = 0
with open('xxx.mp4', mode='wb') as file_object:
	# 分块读取下载的视频文件(最多一次读取128字节),并逐一写入到文件中.len(chunk)表示实际读取到每块视频文件大小
	for chunk in res.iter.content(128):
		download_size += len(chunk)
		file_object.write(chunk)
		file_object.flush()
		message = f"视频总大小为:{file_size}字节,已下载{download_size}字节"
		print(message)
	file_object.close()

res.close()
```

- 下载过程中,输出已下载百分比,示例代码:
```python
import time

print("正在下载中...")
for i in range(101):
	text = f"\r{i}%"
	print(text, end="")
	time.sleep(0.2)

print("\n下载完成")
```
这些输出并不是一行输出,所以进度显示的不太好
`\r`这次输出结束,下一次输出会从当前行最开头开始覆盖进行输出
在Python中，你可以使用`\r`字符来控制光标返回到当前行的开头，然后在该行上输出新的文本。

而且需要记住print输出,默认有一个末尾加换行符`\n`,所以就是下一行的最前面开始输出,所以需要增加参数end=空

