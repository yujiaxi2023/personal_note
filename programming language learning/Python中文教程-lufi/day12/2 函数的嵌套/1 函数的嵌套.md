Python中以函数作为作用域，在作用域中定义相关数据只能被当前作用域或者子作用域使用

```python
NAME = "WUPEIQI"  
print(NAME)  
  
def func():  
    print(NAME)  
  
func()
```

## 1.1 函数在作用域中

其实，函数也是定义在作用域中的数据，在执行函数的时候，也同样遵循：优先在自己作用域中寻找，没有就向上一级作用域寻找，例如：
```python
def func():  
    print(NAME)  
  
func()  
  
# 1. 在全局作用域中定义了函数func  
def func():  
    print("你好")  
  
# 2. 在全局作用域找到了func函数并执行  
func()  
  
# 3. 在全局作用域中定义了execute函数  
def execute():  
    print("开始")  
    # 优先在当前函数作用域找到func函数，没有就向上级作用域中寻找  
    func()  
    print("结束")  
      
# 4. 在全局作用域执行execute函数  
execute()
```
此处有一个易错点：作用域中的值在被调用的时候是什么
- 情景1
```python
def func():  
    print("你好")  
  
  
func()  
  
  
def execute():  
    print("开始")  
    func()  
    print("结束")  
  
  
execute()  # 因为python是解释性语言，不是编译型语言
  
def func():  
    print(666) # 重名了所以会覆盖原函数
```


- 情景2
```python
def func():  
    print("你好")  
  
  
func()  
  
  
def execute():  
    print("开始")  
    func()  
    print("结束")  
  
  
execute()  
  
  
def func():  
    print(666)  
  
execute() # 开始 666 结束
```


## 1.2 函数定义的位置

上述示例中的函数均定义在全局作用域，其实函数也可以定义在局部作用域，这样函数被局部作用域和其子作用域中调用（函数的嵌套）

```python
def func():  
    print("gaoxiaosong")  
  
def handler():  
    print("wuyanzu")  
    def inner():  
        print("dama")  
    inner()  
    func()  
    print("haidian")  
  
handler()
```
这里inner函数可以在handler函数中找到，所以是局部作用域
然后func在全局中找
只要理解数据定义的时候存在的作用域，根据从上到下代码执行过程进行分析，再怎么嵌套都可以搞定


为什么需要嵌套定义？为什么不能够全部定义在全局？
大多数情况下都是定义在全局作用域的，不会嵌套定义函数。但是当我们定义一个函数去实现某个功能的时候，想要将内部功能拆分成N个函数，又担心这个N个函数在全局会跟其他的函数名冲突的时候（尤其是多人协同开发）可以选择使用函数的嵌套

```python
def func():
	"""1000行代码"""
```

这样不能把代码全部放在一个函数中
传统我们想法是，拆分函数的功能，用多个函数表示
但是这样在多人开发的时候，如果两个人的参数存在冲突，特别是同时开发的时候
所以我们可以选择将函数跟函数嵌套，这样就不会存在作用域问题了
```python
def func():
	def f1():
		pass
	def f2():
		pass
	f1()
	f2()
```


