## 对象嵌套

在基于面向对象进行编程的时候,对象之间可以存在各种各样的关系,例如:组合,关联,依赖等等(java中的称呼), 用大白话来说就是各种嵌套
下面我们就用示例来学习常见的嵌套的情景

情景一:
```python
class Student(object):  
    """学生类"""  
  
    def __init__(self, name, age):  
        self.name = name  
        self.age = age  
  
    def message(self):  
        data = f"我是一名学生,我叫{self.name},今年{self.age}岁"  
        print(data)  
  
  
class Classes(object):  
    """班级类"""  
  
    def __init__(self,title):  
        self.title = title  
        self.student_list = []  
  
    def add_student(self, stu_object):  
        self.student_list.append(stu_object)  
  
    def add_students(self, stu_object_list):  
        for stu in stu_object_list:  
            self.add_student(stu)  
  
    def show_members(self):  
        for item in self.student_list:  
            item.message()  
  
s1 = Student('吴佩琦',19)  
s2 = Student('alex',19)  
s3 = Student('日天',19)  
  
c1 = Classes('三年二班')  
c1.add_student(s1)  
c1.add_students([s2,s3])  
  
print(c1.title) # 三年二班  
print(c1.student_list) # [<__main__.Student object at 0x000002694BCC66D0>, <__main__.Student object at 0x000002694BCC6730>, <__main__.Student object at 0x000002694BDE7280>]  
# 每一个item是放进去的student对象  
# 里有一个name和age  
for item in c1.student_list:  
    print(item.name, item.age)  
    item.message()  
  
# 吴佩琦 19# 我是一名学生,我叫吴佩琦,今年19岁  
# alex 19  
# 我是一名学生,我叫alex,今年19岁  
# 日天 19# 我是一名学生,我叫日天,今年19岁  
  
c1.show_members()  
# 我是一名学生,我叫吴佩琦,今年19岁  
# 我是一名学生,我叫alex,今年19岁  
# 我是一名学生,我叫日天,今年19岁
```

使用一个class实例化几个对象
将这些对象维护在另外一个对象中,甚至更细粒度的对象
比如上面的例子中,student 123是创建的student实例对象
classes1是用来存储着三个student对象的一个实例对象
在class类中有调用student 123这几个对象的方法,和维护他们使用的列表
要注意在这里直接print的话会显示结果是Student类的object,不是我们想要取到的维护在Student类里面的数据


情景二:
```python
class Student(object):  
    """学生类"""  
  
    def __init__(self, name, age, class_object):  
        self.name = name  
        self.age = age  
        self.class_object = class_object  
  
    def message(self):  
        data = f"我是一名{self.class_object}班的学生,我叫{self.name},今年{self.age}岁"  
        print(data)  
        return data  
  
  
class Classes(object):  
    """班级类"""  
  
    def __init__(self,title):  
        self.title = title  
  
c1 = Classes('python')  
c2 = Classes('linux')  
  
user_object_list = [  
    Student('wupeiqi',19,c1),  
    Student('alex',19,c2),  
    Student('ritian',19,c2)  
]  
# 将这个Classes实例对象,传递到Student类中的class_object中  
# 所以这些都封装在Student类实例化的对象中了  
  
# 对学生列表循环得到的是学生对象  
# 这些实例对象都可以根据Student的方法和成员进行调用  
# 这些对象中其实还封装了title的值  
for obj in user_object_list:  
    print(obj) # <__main__.Student object at 0x000001DAD5626130>  
    # 这些实例对象都可以根据Student的方法和成员进行调用  
    print(obj.name,obj.age) # wupeiqi 19  
    print(obj.message()) # 我是一名<__main__.Classes object at 0x000001DAD5957580>班的学生,我叫wupeiqi,今年19岁  
    # None 打印出来是None是Student类中的message返回值是None  
    # 如果修改返回值,就不一样 我是一名<__main__.Classes object at 0x0000012D6D4F7580>班的学生,我叫wupeiqi,今年19岁  
    # 这些对象中其实还封装了title的值  
    print(obj.class_object.title) # python
```

流程是这样的:
- 先执行c1和c2的实例化,传入给Classes类的init方法title参数为python和linux
- 然后创建一个实例化空间Student,传入参数wupeiqi 19 c1,c1其实就是指向c1的实例化内存地址
- 同理剩下两个实例化对象是一样的

![[Pasted image 20231031110417.png]]


情景三:
```python
class Student(object):  
    """学生类"""  
  
    def __init__(self, name, age, class_object):  
        self.name = name  
        self.age = age  
        self.class_object = class_object  
  
    def message(self):  
        data = f"我是一名{self.class_object}班的学生,我叫{self.name},今年{self.age}岁"  
        print(data)  
  
class Classes(object):  
    """班级类"""  
  
    def __init__(self,title,school_object):  
        self.title = title  
        self.school_object = school_object  
  
class School(object):  
    """学校类"""  
  
    def __init__(self,name):  
        self.name = name  
  
s1 = School("beijing")  
s2 = School("shanghai")  
  
c1 = Classes('python',s1)  
c2 = Classes('linux',s2)  
  
user_object_list = [  
    Student('wupeiqi',19,c1),  
    Student('alex',19,c1),  
    Student('ritian',19,c2)  
]  
  
for obj in user_object_list:  
    print(obj)  
    print(obj.name,obj.class_object.title,obj.class_object.school_object.name)  
  
print(user_object_list[0].class_object.school_object.name) # beijing
```

流程:
- 创2个School的实例对象,存储一个name=beijing / name=shanghai变量
- 创建2个Classes的实例对象,储存一个title=python,和s1的内存地址
- 创建列表,中间有3个Student实例对象,储存name=wupeiqi,age=19,class_object指向c1内存地址
- 其余的同理
可以通过对象嵌套获得关联的储存在不同类中的数据

![[Pasted image 20231031112434.png]]