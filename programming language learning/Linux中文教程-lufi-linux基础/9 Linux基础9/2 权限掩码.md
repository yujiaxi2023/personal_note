
权限掩码其实就是一个值
### 查看权限掩码umask
```
umask
[root@localhost greptut]# umask 
0022
```
删除2分钟以前创建的所有文件
```
find /root -amin +2 -exec rm -f {} \;
```

```
mkdir dms
touch test.txt
ll
```
```
[root@localhost lintut]# mkdir dms
[root@localhost lintut]# touch dms.txt
[root@localhost lintut]# ll
total 0
drwxr-xr-x 2 root root  6 Dec 19 06:32 dms
-rw-r--r-- 1 root root  0 Dec 19 06:32 dms.txt
drwxr-xr-x 2 root root 61 Dec 19 05:27 greptut
```
可以发现创建的目录权限都是755,文件都是644

这个权限就是掩码计算出来的

如果创建文件
```
文件
   0666
-  0022
--------
   0644
目录
   0777
-  0022
--------
   0755
```
修改文件
```
vim /etc/profile
```
```
# By default, we want umask to get set. This sets it for login shell
# Current threshold for system reserved uid/gids is 200
# You could check uidgid reservation validity in
# /usr/share/doc/setup-*/uidgid file
if [ $UID -gt 199 ] && [ "`/usr/bin/id -gn`" = "`/usr/bin/id -un`" ]; then
    umask 002
else
    umask 022
```
在这里可以改umask的值

刚才的操作有一个错误

![[Pasted image 20231218214328.png]]
因为删除了过多的隐藏文件
所以需要把隐藏文件复制回去
```
cp /etc/skel/.bash* .
```
更改权限掩码的默认值就可以显示出默认权限值
权限值尽量改偶数,不要改奇数
当然能不改就不改,没啥特别的

可以加系统的安全性,就是只让自己的用户能够进行创建和修改
那我就可以将上边的 umask改权限
如果我想要所有的文件创建的时候都是600的权限
那umask就改成0066


### inode index node
比如500g的硬盘,一部分存数据,一部分存目录索引
目录索引是会占用一部分空间
数据储存是储存在硬盘中切割成非常多份的4kb也就是4096个字节的仓库中
文件都应该切割成无数的小块存放在空间中
如果存大文件一整块,就会造成很多磁盘空洞
每个小块的都叫一个block,目录中每一行都有一个inode

如果大量储存很多的空文件和小文件,但是inode已经满了
![[Pasted image 20231218215429.png]]
所以inode满了只能清理临时文件了
会报错
![[Pasted image 20231218215456.png]]

文件的权限是存放在inode中的,首先是从inode之中读取权限,如果权限不足就无法访问block获取硬盘中的数据

