## 权限管理

root用户权限最高

user普通用户
users用户组

文件权限

```
r 4 代表阅读权限 read
w 2 代表写权限 write
x 1 代表执行权限 executive
- 0 空权限位

权限值表
0 ---
1 --x
2 -w-
3 -wx
4 r--
5 r-x
6 rw-
7 rwx
```

```
[root@localhost desktop]# ls -l /
total 20
lrwxrwxrwx.   1 root root    7 Dec  4 23:21 bin -> usr/bin
dr-xr-xr-x.   5 root root 4096 Dec  4 23:27 boot
drwxr-xr-x.  19 root root 3140 Dec 11 02:26 dev
drwxr-xr-x.  79 root root 8192 Dec 14 01:18 etc
drwxr-xr-x.   5 root root   43 Dec 13 08:25 home
lrwxrwxrwx.   1 root root    7 Dec  4 23:21 lib -> usr/lib
lrwxrwxrwx.   1 root root    9 Dec  4 23:21 lib64 -> usr/lib64
drwxr-xr-x.   2 root root    6 Apr 11  2018 media
drwxr-xr-x.   2 root root    6 Apr 11  2018 mnt
drwxr-xr-x.   2 root root    6 Apr 11  2018 opt
dr-xr-xr-x. 100 root root    0 Dec 11 02:26 proc
dr-xr-x---.   3 root root  149 Dec 11 02:46 root
drwxr-xr-x.  26 root root  700 Dec 14 01:18 run
lrwxrwxrwx.   1 root root    8 Dec  4 23:21 sbin -> usr/sbin
drwxr-xr-x.   2 root root    6 Apr 11  2018 srv
dr-xr-xr-x.  13 root root    0 Dec 11 02:26 sys
drwxrwxrwt.  12 root root 4096 Dec 14 03:09 tmp
drwxr-xr-x.  13 root root  155 Dec  4 23:21 usr
drwxr-xr-x.  19 root root  267 Dec  5 02:59 var
```

第一个字母代表文件类型
```
- 普通文件
d 目录文件
l 快捷方式
```

```
所属用户的权限  所属用户组的权限 其他用户的权限
rwx               rwx            rwx
```
ugo权限user group other

读写执行三个权限位置不能省略，即使没有也有-显示

```
[root@localhost desktop]# ls -l
total 4
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
```
这是root用户创建的文件
```
可以看到，创建的文件属于root用户和用户组
所以用户对他有读写权限，用户组只有阅读权限
其他用户只有读权限
对于目录就是读执行权限
```

### chmod更改权限
```
[root@localhost desktop]# touch {1..5}.txt
[root@localhost desktop]# ls
1.txt  2.txt  3.txt  4.txt  5.txt  dms  linux.txt
[root@localhost desktop]# ls -l
total 4
-rw-r--r--. 1 root root   0 Dec 14 05:21 1.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 2.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 3.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 4.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 5.txt
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
[root@localhost desktop]# chmod -r 1.txt
[root@localhost desktop]# ls -l
total 4
--w-------. 1 root root   0 Dec 14 05:21 1.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 2.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 3.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 4.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 5.txt
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
```

我们执行了
```
chmod -r 文件名
```
然后可以看到1.txt文件的r权限消失了
而且是用户，用户组，其他用户的权限全部消失
这个操作有点僵硬，所以我们就
```
chmod +r 文件名
```
这时候权限就增加回来了
```
[root@localhost desktop]# chmod +r 1.txt
[root@localhost desktop]# ls -l
total 4
-rw-r--r--. 1 root root   0 Dec 14 05:21 1.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 2.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 3.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 4.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 5.txt
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
[root@localhost desktop]# 
```

我们对于某一个权限，比如用户进行操作，其他权限不变
```
chmod u-r 1.txt
```
```
[root@localhost desktop]# chmod u-r 1.txt
[root@localhost desktop]# ls -l
total 4
--w-r--r--. 1 root root   0 Dec 14 05:21 1.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 2.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 3.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 4.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 5.txt
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
```

我们将权限全部变为空权限
```
chmod -rwx
```
```
[root@localhost desktop]# chmod -rwx 1.txt
[root@localhost desktop]# ls -l
total 4
----------. 1 root root   0 Dec 14 05:21 1.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 2.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 3.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 4.txt
-rw-r--r--. 1 root root   0 Dec 14 05:21 5.txt
drwxr-xr-x. 2 root root 141 Dec 14 01:52 dms
-rw-r--r--. 1 root root  21 Dec 14 02:30 linux.txt
```

当我们只有读权限的时候
```
chmod u+r 1.txt
vi 1.txt
```
这时候我们的文件是显示readonly
![[Pasted image 20231214193813.png]]
但是能不能改呢？
结果是可以，因为现在操作的是这个文件的用户，所以使用！进行强制修改时可以的

对于文件的权限，文件的主组就可以加权限
```
chmod o+r 1.txt
```
如果用其他的用户进行vi修改，即使添加了！也无法进行保存
![[Pasted image 20231214194057.png]]

**执行必须是一个命令文件**
```
cp /bin/ls . # . 代表当前目录
file ls # ls是一个命令文件
如果将这个文件的执行权限去掉了，就会从绿色变成白色
变成了普通文件
然后这个文件就不能执行了
```
```
/tmp/ls -l
```
这就是在指定目录下运行执行文件

使用xftps就可以进行windows和linux的文件传输了

![[Pasted image 20231214195239.png]]
我可以使用xftps将wget传到linux中
但是现在是执行不了的
我们给他加执行权限，就可以变绿
但是一定要给二进制文件加执行权限

### 下载sz
```
sz /bin/wget
```
因为现在使用的虚拟机是最低限度下载的东西，所以有可能执行文件不齐全，在最开始下载的centos没有这个命令和wget命令 

```
[root@localhost desktop]# /root/lintut/desktop
-bash: /root/lintut/desktop: Is a directory
[root@localhost desktop]# /root/lintut/desktop/tail -1 2.txt
:
[root@localhost desktop]# /root/lintut/desktop/tail -2 2.txt
adfkjahdjf
:
```
这是将bin文件夹下的二进制执行文件从win中转移到linux中加权后进行执行
因为执行文件并不在全局环境变量或者局部环境变量中，所以无法直接输命令文件名字来执行文件

##### 可执行程序：
1. 要么使用完整路径进行执行
2. 要么放在特定的全局变量和局部环境变量的目录下就可以进行执行
3. 或者添加环境变量

### echo $PATH可以打印全局变量目录
```
[root@localhost desktop]# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
```

这时候我们可以关注一个内容
```
ls -l /
```
查看根目录下
其实有一些是快捷方式指向的是别的文件夹
```
[root@localhost desktop]# ls -l /
total 20
lrwxrwxrwx.   1 root root    7 Dec  4 23:21 bin -> usr/bin
dr-xr-xr-x.   5 root root 4096 Dec  4 23:27 boot
drwxr-xr-x.  19 root root 3140 Dec 11 02:26 dev
drwxr-xr-x.  79 root root 8192 Dec 14 05:17 etc
drwxr-xr-x.   5 root root   43 Dec 13 08:25 home
lrwxrwxrwx.   1 root root    7 Dec  4 23:21 lib -> usr/lib
lrwxrwxrwx.   1 root root    9 Dec  4 23:21 lib64 -> usr/lib64
drwxr-xr-x.   2 root root    6 Apr 11  2018 media
drwxr-xr-x.   2 root root    6 Apr 11  2018 mnt
drwxr-xr-x.   2 root root    6 Apr 11  2018 opt
dr-xr-xr-x. 103 root root    0 Dec 11 02:26 proc
dr-xr-x---.   3 root root  149 Dec 11 02:46 root
drwxr-xr-x.  26 root root  700 Dec 14 01:18 run
lrwxrwxrwx.   1 root root    8 Dec  4 23:21 sbin -> usr/sbin
drwxr-xr-x.   2 root root    6 Apr 11  2018 srv
dr-xr-xr-x.  13 root root    0 Dec 11 02:26 sys
drwxrwxrwt.  12 root root 4096 Dec 14 03:09 tmp
drwxr-xr-x.  13 root root  155 Dec  4 23:21 usr
drwxr-xr-x.  19 root root  267 Dec  5 02:59 var
```
